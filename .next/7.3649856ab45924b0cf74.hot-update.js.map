{"version":3,"file":"7.3649856ab45924b0cf74.hot-update.js","sources":["webpack:///components/IdeaComponent.js"],"sourcesContent":["import React from 'react'\nimport axios from 'axios'\nimport 'isomorphic-fetch'\nimport Layout from './layout';\nimport Masonry from 'react-masonry-component';\nimport InfiniteScroll from 'react-infinite-scroller'\nimport ImageModal from './image-modal';\nimport {mapObject , ucfirst} from '../libraries/helpers'\nimport {Link} from '../routes'\nimport $ from 'jquery';\nconst APIURL = process.env.DOMAIN + process.env.APIURI\nvar currentPath = '/'\nvar asPath = '/'\nimport {Router} from '../routes'\nimport css from 'styles/fscreen_idea.css'\nexport default class IdeaComponent extends React.Component{\n    state = {\n        images: [],\n        nextUrl : null,\n        hasMoreItems: true,\n        h1 : null,\n        filter_default : [],\n        listBadge : []\n    }\n    constructor(props){\n        super(props)\n        currentPath = this.props.path\n        asPath = this.props.asPath\n    }\n    // componentWillMount(){\n    //     this.setState({\n    //         h1 : this.props.h1,\n    //         filter_default : this.props.filter_default,\n    //         color : this.props.colors,\n    //         images: this.props.images,\n    //         nextUrl: this.props.nextUrl,\n    //         listBadge : this.props.listBadge ? this.props.listBadge : []\n    //     })\n    // }\n    \n    loadItems(page) {\n        var self = this;\n        var url = '';\n        if(this.props.nextUrl) {\n            url = this.props.nextUrl;\n        }\n        if(this.props.nextUrl != null){\n            axios.get(url)\n            .then(function(resp) {\n                if(resp) {\n                    var tracks = self.props.images;\n                    var data = resp.data\n                    data.images.data.map((track) => {\n                        tracks.push(track);\n                    });\n                    if(data.images.next_page_url && data.images.next_page_url != null) {\n                        self.props.changeState(tracks,data.images.next_page_url)\n                        // self.setState({\n                        //     images: tracks,\n                        //     nextUrl: data.images.next_page_url,\n                        // });\n                    } else {\n                        self.setState({\n                            hasMoreItems: false\n                        });\n                    }\n                }\n            });\n        }\n       \n    }\n    showPhoto (e, id , slug) {\n        e.preventDefault()\n        if(this.props.ideaParams){\n            var params = this.props.ideaParams\n            if(this.props.subParams){\n                Router.pushRoute(`/y-tuong/${params}?f=${this.props.subParams}&photoId=${id}&slug=${slug}`,`/anh/${id}-${slug}`)\n            }else{\n                Router.push(`${currentPath}?params=${params}&photoId=${id}&slug=${slug}`,`/anh/${id}-${slug}`) \n            }\n        }else{\n            Router.push(`${currentPath}?photoId=${id}&slug=${slug}`,`/anh/${id}-${slug}`)\n        }\n    }\n    componentDidMount(){\n        var showChar = 150;  // How many characters are shown by default\n        var ellipsestext = \"\";\n        var moretext = \"Xem thêm >\";\n        var lesstext = \"Rút gọn <\";\n        const self = this;\n        $('.moreDes').each(function(e) {\n            var content = $(this).html();\n            if(content.length > showChar) {\n                var c = content.substr(0, showChar);\n                var h = content.substr(showChar, content.length - showChar);\n                var html = c + '<span class=\"moreellipses\">' + ellipsestext+ '&nbsp;</span><span class=\"morecontent\"><span>' + h + '</span>&nbsp;&nbsp;<a href=\"\" class=\"morelink\">' + moretext + '</a></span>';\n                $(this).html(html);\n            }\n\n        });\n\n        $(\".morelink\").click(function(e){\n            e.preventDefault()\n            if($(this).hasClass(\"less\")) {\n                $(this).removeClass(\"less\");\n                $(this).html(moretext);\n            } else {\n                $(this).addClass(\"less\");\n                $(this).html(lesstext);\n            }\n            $(this).parent().prev().toggle();\n            $(this).prev().toggle();\n            self.masonry.performLayout()    ;\n            return false;\n        });\n        $('.sidebar-service ul').each(function(e){\n            if ($(this).find('li').length == $(this).find($('li:visible')).length) {\n               $(this).find('.loadmore').hide();\n            }\n\t\t});\n        $('.sidebar-service').on('click','.loadmore',function () {\n            var list = $(this).parent().find($('li'));\n\t\t\t$(this).parent().find($('li:hidden')).show();\n            if (list.length == $(this).parent().find($('li:visible')).length) {\n                $(this).removeClass('loadmore');\n                $(this).addClass('hidemore');\n                $(this).html('Thu gọn');\n            }\n        });\n        $('.sidebar-service').on('click','.hidemore',function () {\n            var list = $(this).parent().find($('li'));\n            $(this).parent().find($('li:visible')).slice(5, list.length).hide();\n            $(this).removeClass('hidemore');\n            $(this).addClass('loadmore');\n            $(this).html('Xem thêm');\n        });\n        $(\".close\").click(function(event) {\n\t    \t$(this).parent().toggle();\n        });        \n    }\n    componentDidUpdate(){\n        // var list = $('.idea-content').find('.moreDes').length;\n        $('.idea-content').find($('.moreDes:visible')).hide();\n        $('.idea-content').find($('.moreDes')).slice(0, 20).show();\n\n    }\n    dismissModal () {\n        if(this.props.ideaParams){\n            var params = this.props.ideaParams\n            if(this.props.subParams){\n                console.log(this.props.subParams);\n                Router.pushRoute(`/y-tuong/${params}?f=${this.props.subParams}`)\n            }else{\n                Router.pushRoute('idea.detail', {params: params})\n            }\n        }else{\n            Router.push('/idea','/y-tuong')\n        }\n    }\n    \n   render(){\n        const masonryOptions = {\n            gutter: '.grid__gutter-sizer',\n            isOriginLeft: true\n        };\n       const { images , h1 ,filter_default , colors , listBadge , detail} = this.props\n       const { photoId , slug } = this.props;\n       return(\n        <Layout {...this.props} navmenu={false} container={false} css={css}>\n        {\n            photoId ?\n            <ImageModal\n                id={photoId}\n                slug={slug}\n                detail={detail}\n                images={images}\n                currentPath={currentPath}\n                ideaParams={this.props.ideaParams}\n                subParams={this.props.subParams}\n                nextPageUrl={this.state.nextUrl}\n                onDismiss={() => this.dismissModal()}\n            /> : ''\n        }\n        <style jsx global>{\n            `\n            #lightbox .nav-link:first-child{\n                border-left: 1px solid #e2e2e2 !important;\n            }\n            #lightbox .nav-link {\n                display: block;\n                padding: 0.4rem 0.7rem !important;\n                border-left: none !important;\n                border-color: #e2e2e2;\n            }\n            `\n        }\n        </style>\n        <div className=\"container-fluid service px-4 bg-gray\">\n            <div className=\"row\">\n                <div className=\"col-0 col-md-3 col-lg-3 px-3\" id=\"sidebar\">\n                    <Sidebar filter={filter_default} color={colors}></Sidebar>\n                </div>\n                <div className=\"col-12 col-md-9 col-lg-9 px-0\" id=\"cat\">\n                    <div className=\"bg-white px-3 py-4\">\n                    <h1 className=\"text-dark title ml-1\">{ h1 && h1 }</h1>\n                        <div className=\"list-tag\">\n                            {\n                                listBadge && listBadge.map((value,index) => (\n                                    <Link prefetch route={value.uri} key={index}>\n                                        <a href={value.uri} ><span className=\"badge badge-pill badge-light border border-primary mr-2 my-1 service-tag\">{value.name_tag} <i className=\"close\"></i></span></a>\n                                    </Link>\n                                ))\n                            }\n                        </div>\n                    <InfiniteScroll\n                        pageStart={0}\n                        loadMore={this.loadItems.bind(this)}\n                        hasMore={this.state.hasMoreItems}\n                        loader={<div className=\"loader\" key='cx'>Loading ...</div>}> \n                    <Masonry\n                    className={'.grid are-images-unloaded mt-3'} \n                    disableImagesLoaded={false}\n                    options={masonryOptions}\n                    ref={c => this.masonry = c}\n                    updateOnEachImageLoad={false}\n                   \n                    >\n                        <div className=\"grid__col-sizer\"></div>\n                        <div className=\"grid__gutter-sizer\"></div>\n                        {\n                            images && images.map((value,index) =>( \n                                <div className=\"grid__item rounded\" key={index}>\n                                    <div className=\"card\">\n                                        <span className=\"position-absolute rounded d-none upload\"> <i className=\"fa fa-upload\"></i> Lưu ảnh</span>\n                                        <Link route=\"image\" params={{ id: value.id , slug : value.slug }}>\n                                            <a onClick={(e) =>  this.showPhoto(e, value.id , value.slug)}>\n                                            <img className=\"rounded card-img-top\" src={value.medium_path} alt={value.name} />\n                                            </a>\n                                            </Link>\n                                        <div className=\"card-body idea-content px-1 pt-1\">\n                                            <h2 className=\"mt-2 font-15 text-black-100\" data-title={value.name}>{value.name}</h2>\n                                            <p className=\"mt-2 images-title font-14 text-black-100 moreDes\" dangerouslySetInnerHTML={{__html: value.descriptions}}></p>\n                                        </div>\n                                    </div>\n                                        \n                                </div>\n                            ))\n                        }\n                        </Masonry>\n                        </InfiniteScroll>\n                    </div>\n                </div>\n            </div>\n        </div>\n        </Layout>\n       )\n   }\n}\nclass Sidebar extends React.PureComponent{\n    constructor(props){\n        super(props)\n    }\n    render(){\n        const { filter , color } = this.props\n        return(\n            <div className=\"sidebar-service row bg-white\">\n            \n                <div className=\"d-md-block px-2 w-100 sidebar-service-content\">\n                {\n                    filter && filter.map((value,index) => (\n                        value.data.length != 0 &&\n                        <div className=\"child-sidebar-service pb-1 col-12 offset-md-0 col-md-12 px-0\" key={index}>\n                            <div className=\"mt-2 widget p-3\">\n                            <h3 className=\"font-15 mb-3\">{value.textName}<span className=\"fa fa-chevron-right d-block d-md-none\"  data-toggle=\"collapse\" data-target={\"#demo\"+index}></span></h3>\n                            \n                            <ul className=\"list-unstyled mb-0 collapse d-md-block\" id={\"demo\"+index}>\n                                {\n                                    value.data && mapObject(value.data, function (index, value) {\n                                        return <li className=\"py-1 radio\" key={index}>\n                                            <Link prefetch route={value.uri}>\n                                            <a className=\"font-13 font-weight-light text-gray\"><label className=\"pr-3\">{value.name_tag}<span>{value.total_doc}</span></label></a>\n                                            </Link>\n                                        </li>\n                                    })\n                                }\n                                <span className=\"more loadmore d-none d-md-block\">Xem thêm <i className=\"la la-arrow-circle-right\"></i></span>\n                            </ul>\n                            </div>\n                        </div>\n                        \n                    ))\n                }  \n                    <div className=\"child-sidebar-service pb-1 col-12 offset-md-0 col-md-12 px-0\">\n                        <div className=\"mt-2 widget p-3\">\n                            <h3 className=\"font-15\">MÀU SẮC</h3>\n                            <span className=\"expand-list\"></span>\n                            <div className=\"service-color mt-3\">\n                            {\n                                color && mapObject(color , function(index,value) {\n                                   return  <a href={value.uri} className=\"text-dark border border-gray\" key={index}><span className={\"float-left \" + value.class} data-toggle=\"tooltip\" title={value.name_tag}></span></a>\n                                })\n                            }  \n                            </div>\n                        </div>\n                   \n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\n\n// WEBPACK FOOTER //\n// components/IdeaComponent.js"],"mappings":";;;;;;;;;;;;;;;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAIA;AACA;;;;;;;;;;;;;;;;;;;;;AALA;AACA;AACA;AACA;AAEA;;;;;AASA;AAAA;AACA;AADA;AACA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AAPA;AACA;AACA;AACA;AACA;AACA;AANA;AAQA;AAEA;AACA;AAHA;AAIA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AAEA;;;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA;AACA;AACA;AACA;AAEA;;;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;;;AAEA;AAAA;AACA;AAAA;AACA;AACA;AAFA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AATA;AAAA;AAAA;AAAA;AAAA;AAHA;AAAA;AAAA;AA6BA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAFA;AAQA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAJA;AAAA;AAAA;AAAA;AAAA;AAMA;AACA;AACA;AACA;AAAA;AAAA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AAQA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAXA;AA0BA;;;;AAjPA;AACA;;;AAkPA;;;;;AACA;AAAA;AACA;AADA;AAEA;AACA;;;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAhBA;AAuBA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AASA;;;;AAnDA;;;;A","sourceRoot":""}