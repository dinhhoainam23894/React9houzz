{"version":3,"file":"11.f271ea1e98cfbbd5bba2.hot-update.js","sources":["webpack:///components/IdeaComponent.js"],"sourcesContent":["import React from 'react'\nimport axios from 'axios'\nimport 'isomorphic-fetch'\nimport Layout from './layout'\nimport Sidebar from './sideBar'\nimport Masonry from 'react-masonry-component'\nimport InfiniteScroll from 'react-infinite-scroller'\nimport ImageModal from './image-modal'\nimport {Link} from '../routes'\nimport $ from 'jquery';\n\nconst APIURL = process.env.DOMAIN + process.env.APIURI\nvar currentPath = '/'\nvar asPath = '/'\nimport {Router} from '../routes'\nimport css from 'styles/fscreen_idea.css'\nimport LazyLoad ,{ forceCheck } from \"react-lazyload\";\nimport Placeholder from \"./PlaceHolder\";\nimport Pagination from \"./pagination\";\n\nexport default class IdeaComponent extends React.Component {\n  state = {\n    images: [],\n    nextUrl: null,\n    hasMoreItems: true,\n    h1: null,\n    filter_default: [],\n    listBadge: []\n  }\n\n  constructor(props) {\n    super(props)\n    currentPath = this.props.path\n    asPath = this.props.asPath\n\n  }\n\n  loadItems(page) {\n    var self = this;\n    var url = '';\n    if (this.props.nextUrl) {\n      url = this.props.nextUrl;\n    }\n    if (this.props.nextUrl != null) {\n      axios.get(url)\n        .then(function (resp) {\n          if (resp) {\n            var tracks = self.props.images;\n            var data = resp.data\n            data.images.data.map((track) => {\n              tracks.push(track);\n            });\n            if (data.images.next_page_url && data.images.next_page_url != null) {\n              self.props.changeState(tracks, data.images.next_page_url)\n            } else {\n              self.setState({\n                hasMoreItems: false\n              });\n            }\n          }\n        });\n    }\n\n  }\n  getPageUrl(i) {\n    let url = \"\";\n    if (this.props.url_path) {\n      url = this.props.url_path\n    }\n    return url + \"?page=\" + i;\n  }\n  showPhoto(e, id, slug) {\n    e.preventDefault()\n    if (this.props.ideaParams) {\n      var params = this.props.ideaParams\n      if (this.props.subParams) {\n        Router.push(`${currentPath}?params=${params}&f=${this.props.subParams}&photoId=${id}&slug=${slug}`, `/anh/${id}-${slug}`)\n      } else {\n        Router.push(`${currentPath}?params=${params}&photoId=${id}&slug=${slug}`, `/anh/${id}-${slug}`)\n      }\n    } else {\n      Router.push(`${currentPath}?photoId=${id}&slug=${slug}`, `/anh/${id}-${slug}`)\n    }\n  }\n  componentDidMount() {\n    setTimeout(forceCheck, 1000)\n    var showChar = 150;  // How many characters are shown by default\n    var ellipsestext = \"\";\n    var moretext = \"Xem thêm >\";\n    var lesstext = \"Rút gọn <\";\n    const self = this;\n    $('.moreDes').each(function (e) {\n      var content = $(this).html();\n      if (content.length > showChar) {\n        var c = content.substr(0, showChar);\n        var h = content.substr(showChar, content.length - showChar);\n        var html = c + '<span class=\"moreellipses\">' + ellipsestext + '&nbsp;</span><span class=\"morecontent\"><span>' + h + '</span>&nbsp;&nbsp;<a href=\"\" class=\"morelink\">' + moretext + '</a></span>';\n        $(this).html(html);\n      }\n\n    });\n    $(\".morelink\").click(function (e) {\n      e.preventDefault()\n      if ($(this).hasClass(\"less\")) {\n        $(this).removeClass(\"less\");\n        $(this).html(moretext);\n      } else {\n        $(this).addClass(\"less\");\n        $(this).html(lesstext);\n      }\n      $(this).parent().prev().toggle();\n      $(this).prev().toggle();\n      self.masonry.performLayout();\n      return false;\n    });\n    $('.sidebar-service ul').each(function (e) {\n      if ($(this).find('li').length == $(this).find($('li:visible')).length) {\n        $(this).find('.loadmore').hide();\n      }\n    });\n    $('.sidebar-service').on('click', '.loadmore', function () {\n      var list = $(this).parent().find($('li'));\n      $(this).parent().find($('li:hidden')).show();\n      if (list.length == $(this).parent().find($('li:visible')).length) {\n        $(this).removeClass('loadmore');\n        $(this).addClass('hidemore');\n        $(this).html('Thu gọn');\n      }\n    });\n    $('.sidebar-service').on('click', '.hidemore', function () {\n      var list = $(this).parent().find($('li'));\n      $(this).parent().find($('li:visible')).slice(5, list.length).hide();\n      $(this).removeClass('hidemore');\n      $(this).addClass('loadmore');\n      $(this).html('Xem thêm');\n    });\n    $(\".close\").click(function (event) {\n      $(this).parent().toggle();\n    });\n  }\n  componentDidUpdate() {\n    forceCheck();\n    $('.idea-content').find($('.moreDes:visible')).hide();\n    $('.idea-content').find($('.moreDes')).slice(0, 20).show();\n  }\n  dismissModal() {\n    if (this.props.ideaParams) {\n      var params = this.props.ideaParams\n      if (this.props.subParams) {\n        Router.pushRoute(`/y-tuong/${params}?f=${this.props.subParams}`)\n      } else {\n        Router.pushRoute('idea.detail', {params: params})\n      }\n    } else {\n      Router.push('/idea', '/y-tuong')\n    }\n  }\n  render() {\n    const datas = this.props.data.images;\n    var nextPageLink =  datas.next_page_url ? this.props.url_path + \"?page=\" + (datas.current_page + 1) : undefined;\n    const masonryOptions = {\n      gutter: '.grid__gutter-sizer',\n      isOriginLeft: true\n    };\n    const {images, h1, filter_default, colors, listBadge, detail, page} = this.props\n    const {photoId, slug} = this.props;\n    return (\n      <Layout {...this.props} navmenu={false} container={false} css={css}>\n        {\n          photoId ?\n            <ImageModal\n              id={photoId}\n              slug={slug}\n              detail={detail}\n              images={images}\n              currentPath={currentPath}\n              ideaParams={this.props.ideaParams}\n              subParams={this.props.subParams}\n              nextPageUrl={this.state.nextUrl}\n              onDismiss={() => this.dismissModal()}\n            /> : ''\n        }\n        <style jsx global>{\n          `\n            #lightbox .nav-link:first-child{\n                border-left: 1px solid #e2e2e2 !important;\n            }\n            #lightbox .nav-link {\n                display: block;\n                padding: 0.4rem 0.7rem !important;\n                border-left: none !important;\n                border-color: #e2e2e2;\n            }\n            `\n        }\n        </style>\n        <div className=\"container-fluid service px-4 bg-gray\">\n          <div className=\"row\">\n            <div className=\"col-0 col-md-3 col-lg-3 px-3\" id=\"sidebar\">\n              <Sidebar filter={filter_default} color={colors} page={page} />\n            </div>\n            <div className=\"col-12 col-md-9 col-lg-9 px-0\" id=\"cat\">\n              <div className=\"bg-white px-3 py-4\">\n                <h1 className=\"text-dark title ml-1\">{h1 && h1}</h1>\n                <div className=\"list-tag\">\n                  {listBadge && listBadge.map((value, index) => (\n                    <Link route={value.uri} key={index}>\n                      <a href={value.uri}>\n                        <span className=\"badge badge-pill badge-light border border-primary mr-2 my-1 service-tag\">{value.name_tag}\n                        <i className=\"close\" /></span></a>\n                    </Link>\n                  ))\n                  }\n                </div>\n                <InfiniteScroll\n                  pageStart={0}\n                  loadMore={this.loadItems.bind(this)}\n                  hasMore={this.state.hasMoreItems}\n                  loader={<div className=\"loader\" key='cx'>Loading ...</div>}>\n                  <Masonry\n                    className={'.grid are-images-unloaded mt-3'}\n                    disableImagesLoaded={false}\n                    options={masonryOptions}\n                    ref={c => this.masonry = c}\n                    updateOnEachImageLoad={false}\n                  >\n                    <div className=\"grid__col-sizer\" />\n                    <div className=\"grid__gutter-sizer\" />\n                    {\n                      images && images.map((value, index) => (\n                        <div className=\"grid__item rounded\" key={index}>\n                          <div className=\"card\">\n                            <span className=\"position-absolute rounded d-none upload\"> <i className=\"fa fa-upload\"></i> Lưu ảnh</span>\n                            <Link route=\"image\" params={{id: value.id, slug: value.slug}}>\n                              <a onClick={(e) => this.showPhoto(e, value.id, value.slug)}>\n                                <LazyLoad once throttle placeholder={<Placeholder dataSrc={value.medium_path} alt={value.name}/>}>\n                                  <img className=\"rounded card-img-top\" src={value.medium_path} alt={value.name}/>\n                                </LazyLoad>\n                              </a>\n                            </Link>\n                            <div className=\"card-body idea-content px-1 pt-1\">\n                              <h2 className=\"mt-2 font-15 text-black-100\" data-title={value.name}>{value.name}</h2>\n                              <p className=\"mt-2 images-title font-14 text-black-100 moreDes\"\n                                 dangerouslySetInnerHTML={{__html: value.descriptions}} />\n                            </div>\n                          </div>\n                        </div>\n                      ))\n                    }\n                  </Masonry>\n                </InfiniteScroll>\n              </div>\n              <div className=\"pagi_desktop my-4\">\n                <Pagination\n                  activePage={this.props.data.images.current_page}\n                  itemsCountPerPage={this.props.data.images.per_page}\n                  totalItemsCount={this.props.data.images.total}\n                  pageRangeDisplayed={5}\n                  onChange={(e) => this.handlePageChange(e)}\n                  getPageUrl={(i) => this.getPageUrl(i)}\n                  nextPageLink={nextPageLink}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n      </Layout>\n    )\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// components/IdeaComponent.js"],"mappings":";;;;;;;;;;;;;;;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAKA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;;;;;;;;;;;;;;;;;;;;;;;AARA;AACA;AACA;AACA;AAMA;;;;;AAUA;AAAA;AACA;AADA;AACA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AARA;AACA;AACA;AACA;AACA;AACA;AANA;AASA;AAEA;AACA;AAHA;AAKA;AACA;;;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AAEA;;;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;;;AACA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA;AACA;AACA;AACA;AACA;;;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;;;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AAFA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AATA;AAAA;AAAA;AAAA;AAAA;AAHA;AAAA;AAAA;AA6BA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAJA;AAUA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAJA;AAAA;AAAA;AAAA;AAAA;AAMA;AACA;AACA;AACA;AAAA;AAAA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AAOA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAbA;AAuBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAPA;AAAA;AAAA;AAAA;AAAA;AAeA;;;;AAxPA;AACA;;;;;A","sourceRoot":""}